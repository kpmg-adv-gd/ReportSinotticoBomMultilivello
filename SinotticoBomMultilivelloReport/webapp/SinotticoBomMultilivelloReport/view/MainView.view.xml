<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table" xmlns:core="sap.ui.core" xmlns:html="http://www.w3.org/1999/xhtml" controllerName="kpmg.custom.SinotticoBomMultilivelloReport.SinotticoBomMultilivelloReport.SinotticoBomMultilivelloReport.controller.MainView" width="100%" height="100%">
<Page title="{i18n>SinotticoBomMultilivello.title}" class="kpmgGDPage" showHeader="false" enableScrolling="false">
    <content>
        <VBox width="100%" height="100%" renderType="Bare">
            <!-- Filtri e header tabella -->
            <HBox width="100%" height="10%" class="smallPadding" renderType="Bare">
                <HBox width="70%" justifyContent="Start" height="100%" alignItems="Center" renderType="Bare">
                    <HBox width="30%" height="100%" alignItems="Center" renderType="Bare">
                        <Label text="{i18n>SinotticoBomMultilivello.label.project}" width="100%" required="true" textAlign="Left" class="kpmgGDMediumlLabelInfo autoWidth" />
                        <Input id="projectInputId" placeholder="Enter Project ..." showSuggestion="true" showValueHelp="false" suggestionItems="{FilterModel>/Project}" class="width70Percentage padding1PercentageLeft">
                            <suggestionItems>
                                <core:Item text="{FilterModel>DATA_FIELD_VALUE}" />
                            </suggestionItems>
                        </Input>
                    </HBox>
                    <HBox width="30%" height="100%" alignItems="Center" renderType="Bare">
                        <Label text="{i18n>SinotticoBomMultilivello.label.machineMaterial}" required="true"  width="100%" textAlign="Left" class="kpmgGDMediumlLabelInfo autoWidth" />
                        <Input id="machineMaterialInputId" placeholder="Enter Material ..." showSuggestion="true" showValueHelp="false" suggestionItems="{FilterModel>/MACH_MATERIALS}" class="width45Percentage padding1PercentageLeft">
                            <suggestionItems>
                                <core:Item text="{FilterModel>child_material}" />
                            </suggestionItems>
                        </Input>
                    </HBox>
                </HBox>
                <HBox width="30%" justifyContent="End" height="100%" alignItems="Center" renderType="Bare">
                    <Button text="{i18n>SinotticoBomMultilivello.button.search}" icon="sap-icon://search" type="Emphasized" class="buttonClassMedium marginRight1Percentage" press="onGoPress" />
                    <Button icon="sap-icon://excel-attachment" type="Transparent" class="buttonClassSmall marginRight1Percentage" press="onExportExcel" />
                </HBox>
            </HBox>
            <!-- Tree Table Sinottico BOM -->
            <VBox width="100%" height="92%" renderType="Bare" class="">
                <t:TreeTable id="SinotticoTreeTable" class="kpmgTreeTable" rows="{SinotticoBomModel>/MaterialList}" rowSelectionChange="rowSelectionChange"  selectionMode="Single" selectionBehavior="RowOnly" enableColumnReordering="true" enableGrouping="true" visibleRowCountMode="Auto" visibleRowCount="10" rowHeight="45px">
                    <t:layoutData>
                        <FlexItemData growFactor="1" baseSize="0%"/>
                    </t:layoutData>
                    <t:extension>
                    <OverflowToolbar style="Clear">
                        <Title text="{i18n>SinotticoBomMultilivello.title}" class="boldClass" />
                        <ToolbarSpacer/>
                        <Button text="{i18n>SinotticoBomMultilivello.treeTable.button.collpaseAll}" press="onCollapseAll"/>
                        <Button text="{i18n>SinotticoBomMultilivello.treeTable.button.expandAll}" press="onExpandAll"/>
                    </OverflowToolbar>
                    </t:extension>
                    <t:columns>
                        <t:Column filterProperty="Material" sortProperty="Material" width="32.5%">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.material}"/>
                            <t:template>
                                <Text text="{SinotticoBomModel>Material}"/>
                            </t:template>
                        </t:Column>
                        <t:Column filterProperty="SFC" sortProperty="SFC"  width="32.5%">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.sfc}"/>
                            <t:template>
                                <Text text="{SinotticoBomModel>SFC}"/>
                            </t:template>
                        </t:Column>
                        <t:Column width="7%" filterProperty="OrderType" sortProperty="OrderType" hAlign="Center">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.orderType}"/>
                            <t:template>
                                <Text text="{SinotticoBomModel>OrderType}"/>
                            </t:template>
                        </t:Column>     
                        <t:Column width="7%" filterProperty="MissingParts"  sortProperty="MissingParts" hAlign="Center">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.missingComponents}"/>
                            <t:template>
                                <core:Icon src="sap-icon://alert" color="#E5BE01" visible="{= (${SinotticoBomModel>MissingParts} === 'true') ? true:false}" class="largeIcon" />
                            </t:template>
                        </t:Column>
                        <t:Column width="7%" sortProperty="EngChanges" hAlign="Center">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.engChanges}"/>
                            <t:template>
                                <Text text="{SinotticoBomModel>EngChanges}"/>
                            </t:template>
                        </t:Column>
                        <t:Column width="7%"  hAlign="Center">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.defects}"/>
                            <t:template>
                                <core:Icon src="sap-icon://high-priority" color="#ca0b30" visible="{= (${SinotticoBomModel>Defects} === 'true') ? true:false}" class="largeIcon" />
                            </t:template>
                        </t:Column>
                        <t:Column width="15%" sortProperty="ProgressStatus" hAlign="Center">
                            <Label text="{i18n>SinotticoBomMultilivello.treeTable.progStatus}"/>
                            <t:template>
                                <ProgressIndicator percentValue="{SinotticoBomModel>ProgressStatus}" displayValue="{= ${SinotticoBomModel>ProgressStatus} + '%'}" state="Success" showValue="true" visible="{= (${SinotticoBomModel>OrderType} !== 'COMP'  &amp;&amp; ${SinotticoBomModel>ParentAssembly} !== true ) ? true:false}" width="100%"/>
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:TreeTable>
            </VBox>
        </VBox>
    </content>
</Page>
</mvc:View>